<!DOCTYPE html>
<html layout:decorate="~{layout}" layout:fragment="content"
      xmlns:th="http://www.thymeleaf.org">
<div class="max-w-7xl mx-auto px-4 py-8">
    <!-- Restaurant Header -->
    <div class="modern-card overflow-hidden mb-8">
        <div class="md:flex">
            <!-- Restaurant Image -->
            <div class="md:w-1/3">
                <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400"
                     alt="Burger Palace"
                     class="w-full h-64 md:h-full object-cover">
            </div>

            <!-- Restaurant Info -->
            <div class="md:w-2/3 p-8">
                <div class="flex flex-col md:flex-row md:items-start gap-6">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-4">
                            <h1 class="text-3xl font-display font-bold">Burger Palace</h1>
                            <div class="flex items-center bg-primary/10 text-primary px-3 py-1 rounded-lg">
                                <i class="fas fa-star text-sm mr-1"></i>
                                <span class="font-bold">4.7</span>
                                <span class="text-sm ml-1">(1,245)</span>
                            </div>
                        </div>

                        <div class="space-y-3 mb-6">
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-tag mr-3 w-5"></i>
                                <span>American • Burgers • Fast Food</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-clock mr-3 w-5"></i>
                                <span>25-35 min delivery • €2.50 delivery fee</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-euro-sign mr-3 w-5"></i>
                                <span>Minimum order: €10.00</span>
                            </div>
                            <div class="flex items-center text-success">
                                <i class="fas fa-check-circle mr-3 w-5"></i>
                                <span class="font-medium">OPEN NOW • Closes at 11:00 PM</span>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button class="modern-btn-outline">
                                <i class="fas fa-heart mr-2"></i>Save
                            </button>
                            <button class="modern-btn-outline">
                                <i class="fas fa-share-alt mr-2"></i>Share
                            </button>
                        </div>
                    </div>

                    <div class="md:w-48">
                        <div class="modern-card p-4">
                            <h3 class="font-display font-bold mb-3">Delivery Info</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Delivery time</span>
                                    <span class="font-medium">25-35 min</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Delivery fee</span>
                                    <span class="font-medium">€2.50</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Minimum order</span>
                                    <span class="font-medium">€10.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Categories -->
    <div class="flex gap-4 overflow-x-auto pb-4 mb-8 filter-scroll">
        <button class="category-chip active" data-category="all">All</button>
        <button class="category-chip" data-category="burgers">
            <i class="fas fa-hamburger mr-2"></i>Burgers
        </button>
        <button class="category-chip" data-category="sides">
            <i class="fas fa-french-fries mr-2"></i>Sides
        </button>
        <button class="category-chip" data-category="drinks">
            <i class="fas fa-glass-whiskey mr-2"></i>Drinks
        </button>
        <button class="category-chip" data-category="desserts">
            <i class="fas fa-ice-cream mr-2"></i>Desserts
        </button>
    </div>

    <!-- Menu Items -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="menu-items">
        <!-- Menu items will be loaded dynamically -->
    </div>
</div>

<!-- Embedded JavaScript -->
<script>
    // Menu data
    const menuItems = [
        {
            id: 1,
            name: "Classic Burger",
            description: "Beef patty, lettuce, tomato, onion, special sauce",
            price: 8.99,
            category: "burgers",
            image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400",
            popular: true
        },
        {
            id: 2,
            name: "Double Cheese Burger",
            description: "Two beef patties, double cheese, pickles, bacon",
            price: 11.99,
            category: "burgers",
            image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400",
            popular: true
        },
        {
            id: 3,
            name: "French Fries",
            description: "Crispy golden fries with sea salt",
            price: 3.99,
            category: "sides",
            image: "https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?w=400"
        },
        {
            id: 4,
            name: "Onion Rings",
            description: "Crispy beer-battered onion rings",
            price: 4.99,
            category: "sides",
            image: "https://images.unsplash.com/photo-1639024471282-cf57d5356f2e?w=400"
        },
        {
            id: 5,
            name: "Coca-Cola",
            description: "330ml can",
            price: 2.50,
            category: "drinks",
            image: "https://images.unsplash.com/photo-1568108211946-786b3a1b8b61?w=400"
        },
        {
            id: 6,
            name: "Chocolate Brownie",
            description: "Warm chocolate brownie with ice cream",
            price: 5.99,
            category: "desserts",
            image: "https://images.unsplash.com/photo-1564355808539-22fda35db7aa?w=400"
        }
    ];

    let selectedCategory = 'all';

    // Initialize menu
    function initMenu() {
        renderMenuItems();

        // Setup category filters
        document.querySelectorAll('.category-chip').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.category-chip').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                selectedCategory = this.dataset.category;
                renderMenuItems();
            });
        });
    }

    function renderMenuItems() {
        const container = document.getElementById('menu-items');
        const filteredItems = selectedCategory === 'all'
            ? menuItems
            : menuItems.filter(item => item.category === selectedCategory);

        container.innerHTML = filteredItems.map(item => `
            <div class="menu-item-card" data-id="${item.id}">
                <div class="w-24 h-24 rounded-xl overflow-hidden flex-shrink-0">
                    <img src="${item.image}"
                         alt="${item.name}"
                         class="w-full h-full object-cover">
                </div>

                <div class="flex-1">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h3 class="font-display font-bold">${item.name}</h3>
                            ${item.popular ? `
                                <span class="inline-flex items-center text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded mt-1">
                                    <i class="fas fa-fire mr-1"></i>Popular
                                </span>
                            ` : ''}
                        </div>
                        <span class="font-bold text-lg">€${item.price.toFixed(2)}</span>
                    </div>

                    <p class="text-gray-600 text-sm mb-4">${item.description}</p>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <button onclick="decreaseQuantity(${item.id})"
                                    class="w-8 h-8 rounded-full border flex items-center justify-center hover:bg-gray-50">
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <span class="font-medium w-8 text-center" id="quantity-${item.id}">0</span>
                            <button onclick="increaseQuantity(${item.id})"
                                    class="w-8 h-8 rounded-full border flex items-center justify-center hover:bg-gray-50">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>

                        <button onclick="addToCartFromMenu(${item.id})"
                                class="modern-btn py-2 px-4">
                            <i class="fas fa-cart-plus mr-2"></i>Add
                        </button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Quantity management
    const quantities = {};

    function increaseQuantity(itemId) {
        if (!quantities[itemId]) quantities[itemId] = 0;
        quantities[itemId]++;
        document.getElementById(`quantity-${itemId}`).textContent = quantities[itemId];
    }

    function decreaseQuantity(itemId) {
        if (!quantities[itemId]) quantities[itemId] = 0;
        if (quantities[itemId] > 0) {
            quantities[itemId]--;
            document.getElementById(`quantity-${itemId}`).textContent = quantities[itemId];
        }
    }

    function addToCartFromMenu(itemId) {
        const item = menuItems.find(i => i.id === itemId);
        const quantity = quantities[itemId] || 1;

        if (!item) return;

        // Add item to cart
        for (let i = 0; i < quantity; i++) {
            addToCart({
                id: `menu-${itemId}-${i}`,
                name: item.name,
                restaurant: 'Burger Palace',
                price: item.price,
                description: item.description
            });
        }

        // Reset quantity
        quantities[itemId] = 0;
        document.getElementById(`quantity-${itemId}`).textContent = '0';

        showToast('Added to cart', `${quantity}x ${item.name} added to your cart`, 'success');
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        initMenu();

        // Add animation to menu items
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'slideUp 0.5s ease-out forwards';
                    entry.target.style.opacity = '0';
                    entry.target.style.transform = 'translateY(20px)';
                }
            });
        }, { threshold: 0.1 });

        // Observe menu items after they're rendered
        setTimeout(() => {
            document.querySelectorAll('.menu-item-card').forEach(card => {
                observer.observe(card);
            });
        }, 100);
    });
</script>

<style>
    .menu-item-card {
        opacity: 0;
    }

    @keyframes slideUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Custom scrollbar for menu categories */
    .filter-scroll {
        scrollbar-width: thin;
        scrollbar-color: var(--primary) transparent;
    }

    .filter-scroll::-webkit-scrollbar {
        height: 4px;
    }

    .filter-scroll::-webkit-scrollbar-track {
        background: transparent;
    }

    .filter-scroll::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 2px;
    }
</style>
</html>