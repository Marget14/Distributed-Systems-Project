<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base}">
<head>
    <title>My Addresses - StreetFoodGo</title>
</head>
<body>
<div layout:fragment="main" class="container mx-auto px-4 py-8">

    <div class="glass-panel p-8 mb-8">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-orbitron font-bold text-white mb-2">My Addresses</h1>
                <p class="text-gray-400">Manage your delivery addresses</p>
            </div>
            <a th:href="@{/profile/addresses/new}" class="cyber-button">
                <i class="fas fa-plus mr-2"></i>Add Address
            </a>
        </div>
    </div>

    <div th:if="${addresses == null || addresses.isEmpty()}" class="glass-panel p-12 text-center">
        <i class="fas fa-map-marker-alt text-4xl text-gray-500 mb-4"></i>
        <h3 class="text-xl font-bold text-white mb-2">No addresses saved</h3>
        <p class="text-gray-400 mb-6">Add an address to enable delivery orders</p>
        <a th:href="@{/profile/addresses/new}" class="cyber-button inline-block">
            <i class="fas fa-plus mr-2"></i>Add your first address
        </a>
    </div>

    <div th:if="${addresses != null && !addresses.isEmpty()}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div th:each="address : ${addresses}" class="glass-panel p-6 hover-lift">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="text-lg font-bold text-white" th:text="${address.label() != null && !address.label().isBlank() ? address.label() : 'Address'}">Label</h3>
                    <span th:if="${address.isDefault()}" class="px-2 py-1 bg-cyber-blue/20 text-cyber-blue rounded text-xs font-semibold">Default</span>
                </div>
                <div class="flex gap-2">
                    <a th:href="@{/profile/addresses/{id}/edit(id=${address.id()})}"
                       class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20">
                        <i class="fas fa-edit text-sm text-white"></i>
                    </a>
                    <form th:action="@{/profile/addresses/{id}/delete(id=${address.id()})}" method="post">
                        <button type="submit" class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center hover:bg-red-500/30">
                            <i class="fas fa-trash text-sm text-red-400"></i>
                        </button>
                    </form>
                </div>
            </div>

            <div class="space-y-2 text-gray-300 text-sm">
                <p class="flex items-center"><i class="fas fa-map-marker-alt w-5 mr-3"></i>
                    <span th:text="${address.street()}">Street</span>
                </p>
                <p class="flex items-center"><i class="fas fa-city w-5 mr-3"></i>
                    <span th:text="${address.city()} + (address.postalCode() != null ? ', ' + address.postalCode() : '')">City</span>
                </p>
                <p th:if="${address.phoneNumber() != null && !address.phoneNumber().isBlank()}" class="flex items-center">
                    <i class="fas fa-phone w-5 mr-3"></i>
                    <span th:text="${address.phoneNumber()}">Phone</span>
                </p>
            </div>

            <div class="mt-6 pt-6 border-t border-white/10">
                <form th:if="${!address.isDefault()}" th:action="@{/profile/addresses/{id}/set-default(id=${address.id()})}" method="post">
                    <button type="submit" class="px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm">
                        Set as Default
                    </button>
                </form>
                <div th:if="${address.isDefault()}" class="px-4 py-2 bg-white/5 text-gray-400 rounded-lg text-sm inline-block">
                    Current Default
                </div>
            </div>
        </div>
    </div>

</div>
</body>
</html>
